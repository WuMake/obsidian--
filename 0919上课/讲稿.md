## 缺失值处理
在风电数据分析中，缺失值是常见问题，可能由传感器故障、传输中断或设备维护等原因造成。
首先，为什么我们需要处理缺失值？主要有三个目的：
第一，保证数据分析的准确性。许多机器学习算法和统计模型无法直接处理缺失值，若忽略它们可能导致偏差或错误的结论。 
第二，提高数据利用率。风电数据采集成本高，通过合理填补而非简单删除含缺失值的记录，可以保留更多有价值的信息。
第三，为后续建模奠定基础。无论是进行功率预测、设备故障诊断还是性能优化，完整的数据集都是前提。
在本次处理中，我选择了均值填补法。这种方法的优势在于：
1. 简单易行，计算高效，尤其适合大规模风电数据集
2. 能保持特征的整体分布趋势，对于风电这类受环境因素影响呈现一定统计规律的数据较为合适
3. 不会引入新的异常值，能维持数据的整体稳定性
当然，均值填补也有局限性，它会略微降低数据的方差，可能掩盖极端值的影响。
在其他场景中，我们还可以根据数据特点选择不同方法：
- 时间序列插值法：对于连续性强的风电数据，可以使用线性插值或样条插值，更好地保留时序特征
- 中位数填补：当数据中存在极端值或偏态分布时，中位数比均值更稳健
- 模式填补：适用于分类特征，如风机运行状态等离散变量
- 高级方法：如 KNN 填补（利用相似样本的值）、基于随机森林或神经网络的预测填补，这些方法精度更高但计算成本也更大
处理缺失值不是简单的技术操作，而是需要结合领域知识和数据特点的决策过程。合理的缺失值处理，能为后续的风电功率预测、设备健康管理等应用提供更可靠的数据基础。

在风电数据分析中，缺失值处理是预处理阶段的核心环节，其核心目的有三：
第一，保障时序数据的连续性。风电功率数据以 15 分钟为间隔记录，每个时间点的观测值都与前后时段存在关联性。缺失值会打破这种连续性，导致后续的趋势分析、周期性识别出现偏差。
第二，保留数据的局部特征。风电功率受风速、风向等环境因素影响，呈现明显的短期波动趋势（比如早晨到中午的功率上升）。简单删除缺失值或用全局统计量填补，会丢失这些关键的局部变化信息。
第三，为高精度建模奠定基础。无论是风电功率预测还是设备状态评估，模型的输入数据都需要反映真实的物理过程。合理的缺失值填补，能让模型学到更可靠的时序规律。
针对本次 15 分钟分辨率的风电数据，我选择了**邻近线性填补法**，主要基于以下考虑：
1. **贴合时间序列特性**：线性填补通过计算缺失值前后两个有效数据点的线性趋势，估算缺失值。这种方法天然适配有规律间隔的时序数据，能保留 15 分钟间隔内的功率变化趋势（比如从 10:00 到 10:30 的功率线性增长）。
    
2. **比均值填补更精准**：全局均值会 “拉平” 数据波动，比如在功率快速上升的时段，用整体均值填补会掩盖真实的增长趋势；而线性填补基于邻近数据，能更好地跟随局部变化。
    
3. **计算高效且可解释**：相比复杂的机器学习填补方法，线性插值原理简单、计算快速，同时填补结果可通过前后数据验证，便于追溯和解释。
    
当然，线性填补也有其适用边界：当数据存在剧烈波动（如突发阵风导致功率骤升骤降）或连续缺失超过多个间隔时，可能出现估算偏差。这时可以考虑更进阶的方法：
- **样条插值**：通过构建平滑曲线拟合数据，适合处理非线性变化明显的风电数据；
- **滚动窗口均值**：用缺失值前后一段时间（如 1 小时内）的均值填补，平衡局部趋势和稳定性；
- **基于相关性的填补**：结合风速、温度等相关特征，通过多元回归估算缺失的功率值；
- **机器学习方法**：对于大量连续缺失，可使用 LSTM 等时序模型，利用历史模式预测缺失值。
总之，缺失值处理的核心是 “尊重数据特性”：风电数据的时序连续性决定了邻近线性填补是当前场景的优选方案，而在其他场景（如高频率采样数据、多变量强相关数据）中，则需灵活选择更适配的方法。只有让填补结果贴近数据的真实生成规律，才能为后续的分析和建模提供可靠支撑。
![[image.png]]

## 异常值检测
[异常检测与处理：方法、应用及案例分析-CSDN博客](https://blog.csdn.net/liuyanlin610/article/details/121859771)
风电场在运行的过程中，每天都会产生海量的风机运行数据，但由于运行故障、数据传输等原因，数据汇集难免会产生数据异常值，AdaBoost、GBDT等模型对异常值很敏感，精准识别异常值是确保模型计算结果准确的关键。

风电数据的特殊性（强时序性、物理约束明确、受环境影响大）决定了其异常检测方法的独特性，主要包括：
1. **物理模型法**（如风速 - 功率曲线法）：  
    基于风电设备的物理特性（风速与功率的理论关系），识别偏离物理规律的异常（如风速高但功率低，可能是叶片故障）。
    
2. **统计方法**：
    
    - 移动平均 / 标准差法：通过滑动窗口捕捉局部波动，识别偏离均值的极端值；
    - 四分位数法（IQR）：基于数据分布的四分位距界定异常范围，适合处理非正态分布数据。
3. **机器学习方法**：
    
    - 孤立森林：通过隔离异常点的难易程度识别异常，适合高维数据；
    - LSTM 自编码器：学习正常时序模式，重构误差大的视为异常，适合捕捉复杂时序特征。
4. **多变量关联法**：  
    结合风速、风向、温度等多特征的关联性（如功率应随风速增大而上升），识别特征间逻辑矛盾的异常。

# 为什么标准化
1. ==‌**消除量纲影响**‌==：将不同单位（如米、万元）或量级（如身高1-2米与收入数千元）的数据映射到同一尺度，避免特征间不可比性；‌‌‌
2. ==‌**优化模型性能**‌==：在机器学习中，标准化后的数据能加速梯度下降收敛速度（如迭代次数可从1000次降至300次），并提升模型精度（如SVM、KNN等距离敏感算法）；‌‌‌
3. ==‌**增强数据可靠性**‌==：减少数据录入错误，提高跨系统数据整合效率，降低管理成本（如企业多部门数据统一）。‌‌

好的，以下是针对你的 0919.ipynb 文件内容，结合机器学习常用流程的讲稿提纲（适合课堂或答辩讲解，含每个环节的逻辑说明）：




---

## 讲稿：机器学习常用流程与实战案例介绍

大家好，今天我将结合风电功率预测的数据分析案例，介绍机器学习项目中常见的流程和关键技术环节。

---

### 1. 数据导入与初步处理

- 首先，我们需要导入常用的数据分析和可视化库，如 pandas、numpy、matplotlib、seaborn 等。
- 读取原始数据文件（如 powerHis.csv 和 weatherHis.csv），并对时间戳列进行格式解析，确保后续时序分析的准确性。
- 通过筛选时间范围（如只保留 2024-01-01 以后的数据），保证数据的时效性和针对性。
- 利用 `pd.merge` 按时间戳合并多源数据，形成统一的分析数据集。

---

### 2. 数据预处理

#### 2.1 时间连续性检查

- 检查数据的时间戳是否连续，找出缺失的时间点，评估数据完整性。
- 生成理论上的完整时间序列，与实际数据对比，统计缺失条数。

#### 2.2 缺失值处理

- 统计各特征的缺失值数量和比例，绘制缺失值热力图，直观展示缺失分布。
- 采用线性插值法填补缺失值，保证数据的连续性和可用性。
- 对填补前后的数据进行可视化对比，验证插值效果。

#### 2.3 异常值检测与修正

- 利用滑动窗口的移动平均和标准差，检测功率等特征的异常值（如采集故障点）。
- 将异常值用线性插值修正，恢复数据的合理性。

---

### 3. 特征工程

#### 3.1 特征选择

- 采用随机森林等模型评估各特征对目标变量（如功率）的重要性，筛选关键特征。
- 可视化特征重要性排序，指导后续建模。

#### 3.2 特征构造

- 通过特征组合、转换、创建等方式，丰富数据表达能力。例如：构造风速与风向的乘积特征，或从时间戳中提取日期、小时等信息。

---

### 4. 数据标准化与聚类分析

- 对功率等特征进行标准化处理，消除量纲影响。
- 按天分组，提取每日功率曲线，便于后续聚类。
- 利用 KMeans 聚类算法，对每日功率曲线进行聚类，分析不同类型的功率变化模式。
- 通过肘部法和轮廓系数确定最佳聚类数，并可视化聚类结果。

---

### 5. 机器学习建模与预测

- 采用滑动窗口法构造时序特征，利用历史功率序列预测未来功率。
- 划分训练集和测试集，进行标准化处理。
- 以支持向量回归（SVR）为例，训练模型并评估预测效果（MSE、R2）。
- 可视化预测值与真实值的对比，直观展示模型性能。

---

### 6. 模型调优与参数选择

- 通过网格搜索（GridSearchCV）结合交叉验证，系统性地寻找最优超参数组合。
- 输出最佳参数和模型性能，进一步提升预测准确率。

---

### 总结

- 机器学习项目的核心流程包括：数据准备、预处理、特征工程、建模与调优、结果分析等环节。
- 每一步都直接影响最终模型的效果，尤其是数据质量和特征工程。
- 本案例完整演示了从原始数据到模型预测的全流程，具有较强的实用性和可扩展性。

---

谢谢大家！欢迎提问交流。

---

如需细化每一部分的讲解内容，可根据实际展示的代码和图表进一步展开。